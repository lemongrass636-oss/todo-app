
# コンポーネント仕様書: TodoPage.tsx

## 1. 概要

ユーザーが日々のタスクを管理するためのメインページコンポーネントです。
タスクの追加・削除・完了管理に加え、**日付ベースのフィルタリング**や**進捗の視覚化（統計レポート）**、**ブラウザへの永続保存**機能を備えています。

## 2. 主な機能

* **タスク管理**: 期限付きタスクの作成、完了フラグの切り替え、削除。
* **カレンダー連携**: カレンダー上でタスクの期限日をドットで強調表示。特定の日付を選択してタスクを抽出。
* **統計レポート**: 全タスク数、完了数、および達成率を円形プログレスバーで表示。
* **自動保存**: `localStorage` を使用し、ブラウザを閉じてもデータが消えないように永続化。
* **ソート機能**: 期限が近い順に自動的に並び替え。

## 3. データ構造 (Type Definitions)

```typescript
interface Todo {
  id: number;       // ユニークID (Date.now()を使用)
  text: string;     // タスク内容
  completed: boolean; // 完了状態
  deadline: string | null; // 期限 (ISO形式の文字列)
}

```

## 4. 画面レイアウト構成

Material UIの `Grid` システムを利用した 2カラム構成です。

| エリア | コンポーネント / 要素 | 説明 |
| --- | --- | --- |
| **左側 (Main)** | `TextField`, `DatePicker`, `List` | タスクの入力フォームおよび一覧表示。 |
| **右側 (Sidebar)** | `CircularProgress`, `DateCalendar` | 進捗率のグラフ表示、および日付フィルタリング用カレンダー。 |

## 5. 内部ロジック

### 状態管理 (State)

* `todos`: 全タスクの配列。
* `filterDate`: カレンダーで選択されているフィルター用の日付。
* `inputText` / `selectedDate`: 新規作成フォームの入力値。

### ライフサイクル (useEffect)

* `todos` が更新されるたびに、`localStorage` ('my-todos') へデータを保存します。

### カスタムレンダー (`ServerDay`)

* `DateCalendar` 内の各日付をカスタマイズし、**「未完了のタスクがある日」**にセカンダリカラーのドット（Badge）を表示します。

## 6. スタイル・装飾

* **期限切れ表示**: 期限が現在時刻を過ぎており、かつ未完了のタスクは赤字で警告表示。
* **完了済み表示**: 取り消し線（line-through）と不透明度の低下により視覚的に区別。
* **レスポンシブ**: モバイル端末では入力フォームが縦並び、統計エリアが下部に移動するよう調整。

---
